<!--
/**

Copyright Â© 2016 Magento. All rights reserved.

See COPYING.txt for license details.

Updated to include loading spinner.
*/
-->

<style>
/* Keyframes for the spinner animation */
@keyframes qwicpay-spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Style for the spinner container */
.qwicpay-loader-container {
    position: relative;
}

/* Style for the spinner itself */
.qwicpay-spinner {
    border: 3px solid #f3f3f3; /* Light grey base */
    border-top: 3px solid #101233; /* Beautiful Blue: #101233 */
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: qwicpay-spin 1s linear infinite;
    display: inline-block;
    vertical-align: middle;
    margin: 0 auto;
}

/* Hide button text when loading, show spinner instead */
.qwicpay-loader-active .action.checkout span {
    visibility: hidden;
}
.qwicpay-loader-active .qwicpay-spinner {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    visibility: visible !important;
}

/* Ensure the button maintains height when content is hidden */
.qwicpay-loader-active .action.checkout {
    min-height: 40px; /* Adjust based on your theme&#39;s default button height */
}


</style>

<div
class="payment-method"
data-bind="css: {'_active': (getCode() == isChecked())}"
>
<div class="payment-method-title field choice">
<input
type="radio"
name="payment[method]"
class="radio"
data-bind="attr: {'id': getCode()}, value: getCode(), checked: isChecked, click: selectPaymentMethod, visible: isRadioButtonVisible()"
/>
<label class="label" data-bind="attr: {'for': getCode()}">
<span >QwicPay</span>
<img
src="https://cdn.qwicpay.com/magento/QPONEBUTTON.webp"
alt="QwicPay Card Payment"
style="vertical-align: middle; margin-right: 8px; width: 70%"
/>
</label>
</div>

<div class="payment-method-content">
<!-- ko foreach: getRegion('messages') -->
<!-- ko template: getTemplate() --><!-- /ko -->
<!--/ko-->
<div class="payment-method-billing-address">
<!-- ko foreach: $parent.getRegion(getBillingAddressFormName()) -->
<!-- ko template: getTemplate() --><!-- /ko -->
<!--/ko-->
</div>

<div class="actions-toolbar">
  <div class="primary qwicpay-loader-container" 
       data-bind="css: {'qwicpay-loader-active': !isPlaceOrderActionAllowed()}">
    
    <!-- LOADER ELEMENT - Visible only when action is NOT allowed (i.e., when placing order) -->
    <div class="qwicpay-spinner" data-bind="visible: !isPlaceOrderActionAllowed()"></div>
    
    <button
      class="action primary checkout"
      type="submit"
      data-bind="
        click: placeOrder,
        attr: {title: $t('Place Order')},
        enable: isPlaceOrderActionAllowed()
      "
    >
      <span data-bind="i18n: 'Place Order'"></span>
    </button>
  </div>
</div>


</div>
</div>